<!-- Dork Builder Modal -->
<div id="dorkBuilderModal" class="dork-builder-modal hidden">
    <!-- Glassmorphism Backdrop -->
    <div class="modal-backdrop" onclick="closeDorkBuilder()"></div>

    <!-- Main Modal Container -->
    <div class="modal-container">
        <!-- Header -->
        <div class="modal-header">
            <div class="header-content">
                <svg class="header-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                        d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253">
                    </path>
                </svg>
                <div>
                    <h2>Dork Builder</h2>
                    <p class="header-subtitle">Build dorks visually in 3 simple steps</p>
                </div>
            </div>
            <button class="close-btn" onclick="closeDorkBuilder()" aria-label="Close">
                <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12">
                    </path>
                </svg>
            </button>
        </div>

        <!-- Progress Indicator -->
        <div class="progress-bar">
            <div class="progress-step active" data-step="1">
                <div class="step-circle">1</div>
                <span>What to find</span>
            </div>
            <div class="progress-connector"></div>
            <div class="progress-step" data-step="2">
                <div class="step-circle">2</div>
                <span>Make specific</span>
            </div>
            <div class="progress-connector"></div>
            <div class="progress-step" data-step="3">
                <div class="step-circle">3</div>
                <span>Where to search</span>
            </div>
        </div>

        <!-- Content Grid -->
        <div class="builder-grid">
            <!-- Left: Wizard Steps -->
            <div class="wizard-container">
                <!-- Step 1: Intent Selection -->
                <div id="builderStep1" class="builder-step active">
                    <h3 class="step-title">What do you want to find?</h3>
                    <p class="step-description">Select a search intent to get started</p>

                    <div class="intent-grid">
                        <!-- Intent cards will be rendered here by JavaScript -->
                    </div>

                    <!-- Continue button (hidden until intent selected) -->
                    <button id="step1NextBtn" class="next-btn" onclick="dorkBuilder.nextStep()"
                        style="display: none; margin-top: 1.5rem;">
                        Continue to Filters
                        <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7">
                            </path>
                        </svg>
                    </button>
                </div>


                <!-- Step 2: Context Filters -->
                <div id="builderStep2" class="builder-step hidden">
                    <button class="back-btn" onclick="dorkBuilder.previousStep()">
                        <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7">
                            </path>
                        </svg>
                        Back
                    </button>

                    <h3 class="step-title">Make it more specific (Optional)</h3>
                    <p class="step-description">Add context filters to narrow your search</p>

                    <div id="contextFilters" class="context-filters">
                        <!-- Context pills rendered dynamically -->
                    </div>

                    <button class="next-btn" onclick="dorkBuilder.nextStep()">
                        Continue
                        <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7">
                            </path>
                        </svg>
                    </button>
                </div>

                <!-- Step 3: Target Scope -->
                <div id="builderStep3" class="builder-step hidden">
                    <button class="back-btn" onclick="dorkBuilder.previousStep()">
                        <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7">
                            </path>
                        </svg>
                        Back
                    </button>

                    <h3 class="step-title">Where should we search?</h3>
                    <p class="step-description">Define your target scope</p>

                    <div class="scope-options">
                        <label class="scope-option">
                            <input type="radio" name="scope" value="domain" checked
                                onchange="dorkBuilder.updateScope(this.value)">
                            <div class="option-content">
                                <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                        d="M21 12a9 9 0 01-9 9m9-9a9 9 0 00-9-9m9 9H3m9 9a9 9 0 01-9-9m9 9c1.657 0 3-4.03 3-9s-1.343-9-3-9m0 18c-1.657 0-3-4.03-3-9s1.343-9 3-9m-9 9a9 9 0 019-9">
                                    </path>
                                </svg>
                                <div>
                                    <strong>Specific Domain</strong>
                                    <span>Target a single site or domain</span>
                                </div>
                            </div>
                        </label>

                        <label class="scope-option">
                            <input type="radio" name="scope" value="subdomain"
                                onchange="dorkBuilder.updateScope(this.value)">
                            <div class="option-content">
                                <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                        d="M4 7v10c0 2.21 3.582 4 8 4s8-1.79 8-4V7M4 7c0 2.21 3.582 4 8 4s8-1.79 8-4M4 7c0-2.21 3.582-4 8-4s8 1.79 8 4">
                                    </path>
                                </svg>
                                <div>
                                    <strong>All Subdomains</strong>
                                    <span>Include all subdomains of a domain</span>
                                </div>
                            </div>
                        </label>

                        <label class="scope-option">
                            <input type="radio" name="scope" value="global"
                                onchange="dorkBuilder.updateScope(this.value)">
                            <div class="option-content">
                                <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                        d="M3.055 11H5a2 2 0 012 2v1a2 2 0 002 2 2 2 0 012 2v2.945M8 3.935V5.5A2.5 2.5 0 0010.5 8h.5a2 2 0 012 2 2 2 0 104 0 2 2 0 012-2h1.064M15 20.488V18a2 2 0 012-2h3.064M21 12a9 9 0 11-18 0 9 9 0 0118 0z">
                                    </path>
                                </svg>
                                <div>
                                    <strong>Global Search</strong>
                                    <span>No domain restriction</span>
                                </div>
                            </div>
                        </label>
                    </div>

                    <div id="domainInput" class="domain-input-wrapper">
                        <label for="targetDomain">Target Domain</label>
                        <input type="text" id="targetDomain" placeholder="example.com" class="input"
                            oninput="dorkBuilder.updatePreview()" />
                    </div>

                    <button class="use-dork-btn" onclick="dorkBuilder.useDork()">
                        <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                        </svg>
                        Use this Dork
                    </button>
                </div>
            </div>

            <!-- Right: Live Preview Sidebar -->
            <div class="preview-sidebar">
                <div class="preview-header">
                    <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path>
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z">
                        </path>
                    </svg>
                    <h4>Live Preview</h4>
                </div>

                <!-- Generated Dork -->
                <div class="preview-section">
                    <label>Generated Dork</label>
                    <div class="dork-display">
                        <pre id="generatedDork" class="dork-code">Select an intent to begin</pre>
                        <button id="copyDorkBtn" class="copy-btn hidden" onclick="dorkBuilder.copyDork()">
                            <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                    d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z">
                                </path>
                            </svg>
                        </button>
                    </div>
                </div>

                <!-- Plain English Explanation -->
                <div class="preview-section">
                    <label>What this means</label>
                    <div class="explanation-box">
                        <p id="dorkExplanation" class="explanation-text">
                            We'll help you build a Google dork step by step.
                        </p>
                    </div>
                </div>

                <!-- Usage Tips -->
                <div class="preview-section tips-section">
                    <label>ðŸ’¡ Tips</label>
                    <ul class="tips-list">
                        <li>Start broad, then add specific filters</li>
                        <li>Context filters are optional but powerful</li>
                        <li>Test your dork before running on production</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
</div>